You are running the repository onboarding signal extraction.

Use the `repo-onboarding` MCP server and follow the grounding rules strictly.

Provenance toggle (default: hidden)
Configuration:
SHOW_PROVENANCE = False

Analyzer Limits:
- DEFAULT_MAX_FILES = 5000 (Maximum files scanned)
- MAX_DOCS_CAP = 10 (Maximum docs returned)
- MAX_CONFIG_CAP = 15 (Maximum config files returned)

Rules:
**Signal Provenance (hard rule):**
- Use the `description` field from the MCP JSON to explain why a command or detected item matters.
- If `SHOW_PROVENANCE` is true, append `(source: <source>)` using the exact `source` value from MCP output.
- If `SHOW_PROVENANCE` is false, omit the source entirely (do not print `source:` or `evidence:` anywhere in ONBOARDING.md).

Hard rule: DO NOT inspect or read repository files directly. Use only MCP tool output as evidence.
Hard rule: DO NOT execute any shell commands, git commands, or similar external processes. You are a Scout, not an Investigator.

Step 1 — Call MCP tools:
1) Call `analyze_repo` with {}
2) Call `get_run_and_test_commands` with {}

Step 2 — Extract Evidence (Internal use only):
From `analyze_repo`, extract:
- repoPath
- python.pythonVersionHints
- python.dependencyFiles
- python.envSetupInstructions
- python.installInstructions
- projectLayout
- scripts
- frameworks (including frameworks[].name, frameworks[].detectionReason, and if present: frameworks[].keySymbols, frameworks[].evidencePath)
- configurationFiles
- docs
- notes
- notebooks (if present: list of directories containing .ipynb files)

From `get_run_and_test_commands`, extract:
- devCommands, testCommands, buildCommands.

Step 3 — Grounding rules (Hard rules):
- Python version: ONLY mention a specific version if `python.pythonVersionHints` contains it. If empty, say exactly: "No Python version pin detected."
- Environment setup: If `python.pythonVersionHints` is empty and no explicit venv commands are detected, you MUST provide a standard (Generic suggestion) venv snippet.
- (Generic suggestion) Labeling Rule: The line `(Generic suggestion)` MUST appear exactly as written (no colon, no extra text) exactly ONE line above the first venv command.
- Venv Formatting:
(Generic suggestion)
* `python3 -m venv .venv` (Create virtual environment.)
* `source .venv/bin/activate` (Activate virtual environment.)
- Commands: ONLY include commands that appear in `scripts.*`, `testSetup.commands`, or `get_run_and_test_commands`.

Install Commands Priority (hard rule):
- If `make install` is detected, it MUST be the primary and SOLE install command.
- Do not invent `pip install` commands if `make install` is present.
- If `make install` is absent, use install commands provided by MCP output (`python.installInstructions` or `scripts.install`).
- Do NOT invent `pip install -r` commands from `python.dependencyFiles`.
- Max ONE `pip install -r` line allowed.

- Signal Provenance: If `SHOW_PROVENANCE` is true, append (source: <source>) using the exact `source` value from MCP output. If `SHOW_PROVENANCE` is false, omit provenance entirely.
- Never present Makefile recipe internals as commands.

Command Formatting Rule (hard rule):
- Every command bullet MUST follow the format:
  `* `command` (Brief description.)`
- Use a space between the backtick and opening parenthesis.
- Do NOT use dashes or colons between the command and description.

Generic suggestion wording (hard rule):
- Do NOT use the phrase "Generic suggestion" as the parenthesized description of a command bullet.
- If you must mark something as generic, use a standalone "(Generic suggestion)" line above it (only where allowed by this prompt).

Confidence rule (hard rule):
- If a command/signal has `confidence: "heuristic"`, label it as "(Generic suggestion)" on the line above.

No-commands sentence (hard rule):
- The ONLY allowed no-commands sentence anywhere in ONBOARDING.md is exactly:
  "No explicit commands detected."
- Do NOT write any variants such as:
  "No explicit format commands detected."
  "No explicit lint commands detected."
  "No explicit install commands detected."
  "No explicit dev commands detected."

Notebook-centric rule (informational only):
- If `notebooks` is present and non-empty OR notes include the notebook-centric message, add a bullet in `## Analyzer notes` indicating:
  "Notebook-centric repo detected; core logic may reside in Jupyter notebooks."
- Also include a bullet listing notebook directories, e.g.:
  "* Notebooks found in: notebooks/, research/"
- Do NOT prescribe a runner (Kaggle/Colab/local). Do NOT assume notebook kernel language.

Framework proof (hard rule):
- Treat frameworks[].keySymbols / frameworks[].evidencePath as internal grounding only.
- Do NOT print keySymbols or evidencePath in ONBOARDING.md.
- When SHOW_PROVENANCE is false, do NOT output any lines containing the substrings "source:" or "evidence:" anywhere in ONBOARDING.md.

Step 4 — Produce ONBOARDING.md (copy/pasteable):
Bullet points in the document ALWAYS use `*`.

Required section rule (hard rule):
- You MUST include ALL required headings from the validator contract in the exact order:
  ## Overview
  ## Environment setup
  ## Install dependencies
  ## Run / develop locally
  ## Run tests
  ## Lint / format
  ## Dependency files detected
  ## Useful configuration files
  ## Useful docs
- Even if a section has no items, you MUST still include the heading.
  - For command sections, use: "No explicit commands detected."
  - For Dependency files detected, if python.dependencyFiles is empty or missing, write:
    "No dependency files detected."

Section placement rule (hard rule):
- If you include "## Analyzer notes", it MUST appear immediately AFTER "## Lint / format"
  and BEFORE "## Dependency files detected".
- Do NOT move "## Analyzer notes" to the end of the document.

**Heading rule (hard rule):**
- Use the heading exactly: `## Environment setup` (do not write `## Environment` and do not add parentheses like `(Python 3.14)` in the heading).
- The first line under `## Environment setup` must be the Python version statement:
  - If `python.pythonVersionHints` is non-empty: `Python version: <value>`
  - If empty: `No Python version pin detected.` (DO NOT prefix with "Python version:").

Command section content rule (hard rule):
For each of these sections:
- ## Install dependencies
- ## Run / develop locally
- ## Run tests
- ## Lint / format

Output MUST be exactly one of:
A) One or more bullet lines of the form: "* `command` (Description.)"
OR
B) A single standalone line: "No explicit commands detected."

Do NOT output any additional explanatory lines if the section already contains at least one command bullet.

Lint / format is a combined section:
- Include any lint commands and any format commands together as bullets in the same section.
- Do not add separate sub-headings or separate fallback sentences for lint vs format.

Backticks usage (hard rule):
- Use backticks ONLY for commands in the command sections.
- Do NOT wrap file paths in backticks in:
  - ## Dependency files detected
  - ## Useful configuration files
  - ## Useful docs

The document MUST start exactly like this:

# ONBOARDING.md

## Overview
Repo path: <repoPath>

Continue with these headings exactly:
## Environment setup
## Install dependencies
## Run / develop locally
## Run tests
## Lint / format

Section routing rule (hard rule):
- Only put venv/activation commands in Environment setup.
- Only put package install commands in Install dependencies.
- If a `pip install ...` command is present anywhere in extracted MCP evidence, you MUST NOT output “No explicit commands detected.”

## Analyzer notes
- Include ONLY if `notes` is not empty OR notebook-centric detection applies OR frameworks are detected.
- List notes verbatim as bullet points.
- If notebook directories are available (analyze_repo.notebooks), add a bullet listing them (informational only).
- List analyzer notes verbatim first, then add the frameworks bullet.

Frameworks (informational only; hard formatting rule):
- If analyze_repo.frameworks is non-empty, add exactly ONE bullet in ## Analyzer notes.
- The bullet MUST match this exact template:

  * Frameworks detected (from analyzer): <names>. (<reason>.)

  Where:
  - <names> is frameworks[].name joined by ", " and MUST end with a period.
  - There MUST be exactly one space before the opening parenthesis.
  - <reason> is either:
    - the single framework's detectionReason (if exactly one framework), OR
    - the shared detectionReason (if multiple frameworks and ALL share the same detectionReason), OR
    - omit the entire parenthesized reason if there is no shared reason.
  - The parenthesized reason MUST end with a period.

Examples:
* Frameworks detected (from analyzer): Flask. (Flask support detected via pyproject.toml (Poetry) dependency key 'flask' (optional).)
* Frameworks detected (from analyzer): Django, Wagtail. (Detected via pyproject.toml classifiers.)

Safety:
- Do NOT print frameworks[].keySymbols or frameworks[].evidencePath.
- Do NOT use the literal labels "source:" or "evidence:" anywhere.

## Dependency files detected
- List `python.dependencyFiles[*].path` as bullets.
- If a dependency file has a `description`, include it in parentheses after the path.
- If python.dependencyFiles is empty or missing, write exactly:
  "No dependency files detected."

## Useful configuration files
- List `configurationFiles[*].path` as bullets.
- If a `description` is present on a config file, include it in parentheses after the path.
- Do NOT print provenance unless SHOW_PROVENANCE is true.

## Useful docs
- List `docs[*].path` as bullets.
- (Do not invent descriptions for docs.)

Step 5 — Write file:
You MUST call `write_onboarding` to persist the changes:
- path: "ONBOARDING.md"
- mode: "overwrite"
- content: (the ONBOARDING.md you just generated)

Step 6 — Token usage:
At the end of your response, write: "Token usage: <value if available, else unknown>"

Token usage placement (hard rule):
- The "Token usage: ..." line MUST NOT be included in the ONBOARDING.md content.
- It must appear only in your final chat response after calling write_onboarding.

Now execute.
